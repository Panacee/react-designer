(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{164:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(58),c=n.n(o),i=n(2),l=n(3),u=n(5),s=n(4),h=n(6),p=n(140),b=n(45),g=n(28),m=n(15),f=n(9),d=n(10),v=n(336),O=n(334),j=n(163),y=n(346),C=n(342),E=n(327),k=n(341),x=n(347),w=n(337),A=n(69),S=n(132),T=n.n(S),P=n(34),D=n(18);function M(){var e=Object(f.a)(["\n    background: rgb(235, 235, 235);\n    border-top: 1px solid rgb(224, 224, 224);\n    transition: all .3s;\n    opacity: ",";\n    transform: scaleY(",");\n    transform-origin: center 0;\n    overflow: hidden;\n"]);return M=function(){return e},e}function W(){var e=Object(f.a)(["\n    color: ",";\n    background: ",";\n    transition: all .3s;\n    height: 40px;\n    width: 40px;\n    font-size: 22px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    &:hover {\n        background: rgb(235, 235, 235);\n        color: #888;\n        cursor: pointer;\n    }\n"]);return W=function(){return e},e}function z(){var e=Object(f.a)(["\n    width: 40px;\n"]);return z=function(){return e},e}var N=d.a.div(z()),R=d.a.div(W(),function(e){return e.hover?"#888":"rgb(181, 181, 181)"},function(e){return e.hover?"rgb(235, 235, 235)":"none"}),F=d.a.div(M(),function(e){return e.hover?1:0},function(e){return e.hover?1:0}),L=[{type:"text",icon:D.h},{type:"rect",icon:D.m},{type:"circle",icon:D.f},{type:"curve",icon:D.d},{type:"image",icon:D.i},{type:"qr",icon:D.l}],H=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).state={hover:!1},n.getSelectedIcon=function(){var e=n.props.selected;return e?Object(C.a)(Object(E.a)("type",e),L).icon:null},n.onMouseEnter=function(){return n.setState({hover:!0})},n.onMouseLeave=function(){return n.setState({hover:!1})},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.onSelect,t=this.state.hover;return a.a.createElement(N,null,a.a.createElement(R,{onClick:function(){return e(null)}},a.a.createElement(P.a,{icon:D.g})),a.a.createElement("div",{onMouseLeave:this.onMouseLeave},a.a.createElement(R,{onMouseEnter:this.onMouseEnter,hover:t},a.a.createElement(P.a,{icon:this.getSelectedIcon()||D.k})),a.a.createElement(F,{hover:t},L.map(function(t){return a.a.createElement(R,{key:t.type,onClick:function(){return e(t.type)}},a.a.createElement(P.a,{icon:t.icon}))}))))}}]),t}(r.Component),I=n(11),X=n(165),Y=n(344),U=n(333),B=n(27),q=n(328),K=n(338),V=n(135),J=n.n(V),G={rect:{type:"rect",width:100,height:100,fill:"#2460A7",stroke:"#21366E",strokeWidth:0,rotation:0},circle:{type:"circle",width:100,height:100,fill:"rgba(106, 174, 170, 1)",stroke:"rgba(37, 148, 144, 1)",strokeWidth:0,rotation:0},curve:{type:"curve",width:100,height:100,fill:"#949CD0",stroke:"#491D70",strokeWidth:1,rotation:0,anchors:!0,close:!0},text:{type:"text",fill:"#000000",stroke:"rgba(0, 0, 0, 0)",strokeWidth:0,text:"\u0422\u0435\u043a\u0441\u0442",rotation:0,fontSize:20,align:"left",fontStyle:"normal",fontFamily:"Open Sans"},image:{type:"image",rotation:0,width:150,height:150},qr:{type:"qr",fill:"#ffffff",width:150,height:150,rotation:0}},Q={curve:{resizeEnabled:!1,rotateEnabled:!1},text:{resizeEnabled:!1},image:{enabledAnchors:["top-left","top-right","bottom-left","bottom-right"]},qr:{enabledAnchors:["top-left","top-right","bottom-left","bottom-right"]}},Z=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).checkNode=function(){var e=n.props.current,t=n.transformer.getStage().findOne(".".concat(e.name));t!==n.transformer.node()?(t&&!e.anchors?n.transformer.attachTo(t):n.transformer.detach(),n.transformer.getLayer().batchDraw()):n.transformer.forceUpdate()},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.checkNode()}},{key:"componentDidUpdate",value:function(){this.checkNode()}},{key:"render",value:function(){var e=this,t=this.props.current,n=Q[t.type]||{};return a.a.createElement(I.Transformer,Object.assign({ref:function(t){return e.transformer=t},rotationSnaps:[0,45,90,135,180,225,270,315,359],keepRatio:!0},n))}}]),t}(r.Component);Z.defaultProps={current:{}};var $=function(e){return function(t){function n(){var e,t;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=Object(u.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(a)))).getUpdatedAnchors=function(e,n){var r=t.props.element.anchors,a=Object(q.a)(r),o=e-a.x,c=n-a.y;return r.map(function(e){return Object(m.a)({},e,{x:e.x+o,y:e.y+c})})},t.onDragMove=function(e){var n=t.props,r=n.element,a=n.onChange,o=e.target.x(),c=e.target.y();a(Object(m.a)({},r,{x:o,y:c},r.anchors?{anchors:t.getUpdatedAnchors(o,c)}:{}))},t.onTransform=function(e){var n=t.props,r=n.element;(0,n.onChange)(Object(m.a)({},r,{x:e.currentTarget.x(),y:e.currentTarget.y(),rotation:e.currentTarget.rotation(),scaleX:e.currentTarget.scaleX(),scaleY:e.currentTarget.scaleY()}))},t.showHelper=function(){var e=t.props.element;return Math.ceil(e.width*(e.scaleX||1))<6||Math.ceil(e.height*(e.scaleY||1))<6},t.getHelperWidth=function(){var e=t.props.element;return Math.ceil(e.width*(e.scaleX||1))<5?Math.ceil(5/(e.scaleX||1)):e.width},t.getHelperHeight=function(){var e=t.props.element;return Math.ceil(e.height*(e.scaleY||1))<5?Math.ceil(5/(e.scaleY||1)):e.height},t}return Object(h.a)(n,t),Object(l.a)(n,[{key:"render",value:function(){return a.a.createElement(e,Object.assign({},this.props,{onDragMove:this.onDragMove,onTransform:this.onTransform,showHelper:this.showHelper(),helperWidth:this.getHelperWidth(),helperHeight:this.getHelperHeight()}))}}]),n}(r.Component)},_=n(7),ee=n.n(_),te=(ee.a.object,ee.a.func,ee.a.func,ee.a.object,ee.a.bool,ee.a.number,ee.a.number,$(function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.element,n=e.onDragMove,o=e.onTransform,c=e.showHelper,i=e.helperWidth,l=e.helperHeight;return a.a.createElement(r.Fragment,null,c&&a.a.createElement(I.Rect,Object.assign({},t,{opacity:0,name:"".concat(t.name,"-helper"),width:i,height:l,onDragMove:n,draggable:!0})),a.a.createElement(I.Rect,Object.assign({},t,{onDragMove:n,onTransform:o,draggable:!0})))}}]),t}(r.Component))),ne=$(function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.element,n=e.onDragMove,o=e.onTransform,c=e.showHelper,i=e.helperWidth,l=e.helperHeight;return a.a.createElement(r.Fragment,null,c&&a.a.createElement(I.Circle,Object.assign({},t,{opacity:0,name:"".concat(t.name,"-helper"),width:i,height:l,onDragMove:n,draggable:!0})),a.a.createElement(I.Circle,Object.assign({},t,{onDragMove:n,onTransform:o,draggable:!0})))}}]),t}(r.Component)),re=$(function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).redraw=function(){setTimeout(function(){return n.props.layer.draw()},500)},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.redraw()}},{key:"componentDidUpdate",value:function(e){this.props.element.fontFamily!==e.element.fontFamily&&this.redraw()}},{key:"render",value:function(){var e=this.props,t=e.element,n=e.onDragMove,r=e.onTransform;return a.a.createElement(I.Text,Object.assign({},t,{onDragMove:n,onTransform:r,draggable:!0}))}}]),t}(r.Component)),ae=[{value:"PT Serif",label:"PT Serif"},{value:"Arvo",label:"Arvo"},{value:"Bitter",label:"Bitter"},{value:"Cardo",label:"Cardo"},{value:"Domine",label:"Domine"},{value:"Old Standard TT",label:"Old Standard TT"},{value:"Varela Round",label:"Varela Round"},{value:"Chivo",label:"Chivo"},{value:"Roboto",label:"Roboto"},{value:"Roboto Slab",label:"Roboto Slab"},{value:"Crimson Text",label:"Crimson Text"},{value:"Libre Baskerville",label:"Libre Baskerville"},{value:"Montserrat",label:"Montserrat"},{value:"Archivo Narrow",label:"Archivo Narrow"},{value:"Lato",label:"Lato"},{value:"Anonymous Pro",label:"Anonymous Pro"},{value:"Merriweather",label:"Merriweather"},{value:"Neuton",label:"Neuton"},{value:"Open Sans",label:"Open Sans"},{value:"Poppins",label:"Poppins"},{value:"Lora",label:"Lora"},{value:"Karla",label:"Karla"},{value:"Source Sans Pro",label:"Source Sans Pro"},{value:"Inconsolata",label:"Inconsolata"},{value:"Playfair Display",label:"Playfair Display"},{value:"Work Sans",label:"Work Sans"},{value:"Alegreya",label:"Alegreya"},{value:"Alegreya Sans",label:"Alegreya Sans"},{value:"Fira Sans",label:"Fira Sans"}],oe=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).state={image:null},n.setImage=function(){var e=new window.Image;e.src=n.props.settings.background,e.onload=function(){return n.setState({image:e})}},n.getProps=function(){var e=n.state.image;if(!e)return{};var t=n.props,r=t.width,a=t.height,o=e.naturalWidth,c=e.naturalHeight,i=c/(o/r),l=o/(c/a);return a>l||a<i&&l<r?{width:r,height:i,y:-i/2+a/2}:{height:a,width:l,x:-l/2+r/2}},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.setImage()}},{key:"componentDidUpdate",value:function(e){Object(B.a)(e.settings.background,this.props.settings.background)||this.setImage()}},{key:"render",value:function(){var e=this.props,t=e.settings,n=e.width,r=e.height,o=this.state.image;return t.pattern?a.a.createElement(I.Rect,{fillPatternImage:o,fillPatternScaleX:t.patternScale,fillPatternScaleY:t.patternScale,width:n,height:r}):a.a.createElement(I.Image,Object.assign({image:o},this.getProps()))}}]),t}(r.Component),ce=$(function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).state={image:null},n.setImage=function(){var e=n.props,t=e.element,r=e.onChange;if(t.image){var a=new window.Image;a.src=t.image,a.onload=function(){n.setState({image:a}),r(Object(m.a)({},t,{width:a.naturalWidth,height:a.naturalHeight}))}}else n.setState({image:null}),r(Object(m.a)({},t,{width:150,height:150}))},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.setImage()}},{key:"componentDidUpdate",value:function(e){Object(B.a)(e.element.image,this.props.element.image)||this.setImage()}},{key:"render",value:function(){var e=this.props,t=e.element,n=e.onDragMove,r=e.onTransform,o=this.state.image;return o?a.a.createElement(I.Image,Object.assign({},t,{image:o,onDragMove:n,onTransform:r,draggable:!0})):a.a.createElement(I.Rect,Object.assign({},t,{fill:"gray",draggable:!0}))}}]),t}(r.Component)),ie=n(136),le=n.n(ie),ue=function(e){for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r<2048?(t+=String.fromCharCode(192|r>>6),t+=String.fromCharCode(128|63&r)):r<55296||r>=57344?(t+=String.fromCharCode(224|r>>12),t+=String.fromCharCode(128|r>>6&63),t+=String.fromCharCode(128|63&r)):(n++,r=65536+((1023&r)<<10|1023&e.charCodeAt(n)),t+=String.fromCharCode(240|r>>18),t+=String.fromCharCode(128|r>>12&63),t+=String.fromCharCode(128|r>>6&63),t+=String.fromCharCode(128|63&r))}return t},se=$(function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).sceneFunc=function(e,t){var r=n.props.element,a=le()(ue(r.link)).modules,o=a.length,c=r.width/o;e.scale(c,c),e.fillStyle=r.fill,e.fillRect(0,0,o,o),a.forEach(function(n,r){n.forEach(function(n,a){n&&(e.beginPath(),e.rect(a,r,1,1),e.closePath(),e.fillStrokeShape(t))})})},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.element,n=e.onDragMove,r=e.onTransform;return t.link?a.a.createElement(I.Shape,Object.assign({},t,{fill:"black",sceneFunc:this.sceneFunc,onDragMove:n,onTransform:r,draggable:!0})):a.a.createElement(I.Rect,Object.assign({},t,{onDragMove:n,onTransform:r,draggable:!0}))}}]),t}(r.Component)),he=n(329),pe=n(330),be=n(331),ge=n(343),me=n(339),fe=n(332),de={text:re,rect:te,circle:ne,curve:$(function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).sceneFunc=function(e,t){var r=n.props.element,a=r.anchors,o=void 0===a?[]:a,c=r.x,i=r.y,l=r.close;e.beginPath();var u=Object(he.a)(function(e,t){var n=Object(pe.a)(Array,Object(be.a)(e));if(t.bezier||!t.bezier&&n&&!Object(ge.a)(Object(E.a)("bezier",!1),Object(be.a)(e))){var r=n&&Object(be.a)(Object(be.a)(e)).bezier,a=r?Object(be.a)(e):[];return a.push(t),[].concat(Object(g.a)(r?Object(me.a)(1,e):e),[a])}return[].concat(Object(g.a)(e),[t])},[],o);Object(fe.a)(function(t,n){if(Object(pe.a)(Array,t)){var r=Object(K.a)(t.map(function(e){var t=e.x,n=e.y;return[t-c,n-i]}));2===r.length&&e.lineTo.apply(e,Object(g.a)(r)),4===r.length?e.quadraticCurveTo.apply(e,Object(g.a)(r)):e.bezierCurveTo.apply(e,Object(g.a)(r))}else 0===n?e.moveTo(t.x-c,t.y-i):e.lineTo(t.x-c,t.y-i)},u),l&&e.closePath(),e.fillStrokeShape(t)},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.element,n=e.onDragMove,o=e.onTransform;return a.a.createElement(r.Fragment,null,a.a.createElement(I.Shape,Object.assign({},t,{opacity:0,strokeWidth:5,name:"".concat(t.name,"-helper"),sceneFunc:this.sceneFunc,onDragMove:n,draggable:!0})),a.a.createElement(I.Shape,Object.assign({},t,{sceneFunc:this.sceneFunc,onDragMove:n,onTransform:o,draggable:!0})))}}]),t}(r.Component)),image:ce,qr:se},ve=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).handleStageMouseDown=function(e){var t=n.props,r=t.onChangeCurrent,a=t.elements,o=t.selectedType,c=t.onAddElement,i=t.current,l=t.onAddAnchor,u=t.anchorsEditable;if(o)c(e.evt.layerX,e.evt.layerY);else if(e.target!==e.target.getStage()){if("Transformer"!==e.target.getParent().className&&"anchor"!==e.target.attrs.className){var s=(e.target.name()||"").replace("-helper","");Object(C.a)(Object(E.a)("name",s),a)&&!u?r(s):i&&i.anchors&&u?l(e.evt.layerX,e.evt.layerY):r(null)}}else r(null)},n.renderElement=function(e){var t=n.props.onChangeCurrentElement,r=de[e.type];return a.a.createElement(r,{key:e.name,element:e,onChange:t,layer:n.layer})},n.getElementsWithAnchors=function(){var e=n.props.elements;return Object(X.a)(Object(Y.a)("anchors"),e)},n.onDragAnchor=function(e,t){var r=n.props,a=r.onChangeCurrentElement,o=r.current;if(o){var c=e.target.x(),i=e.target.y();a(Object(m.a)({},o,{x:t?o.x:c,y:t?o.y:i,anchors:Object(k.a)(t,Object(m.a)({},o.anchors[t],{x:c,y:i}),o.anchors)}))}},n.renderAnchors=function(e){var t=n.props,r=t.onChangeCurrentAnchor,o=t.currentAnchor;return Object(U.a)(["current","name"],e.name,n.props)&&e.anchors.map(function(t,c){return a.a.createElement(I.Circle,{key:"anchor-".concat(e.name,"-").concat(c),className:"anchor",x:t.x,y:t.y,fill:"white",stroke:"rgb(0, 161, 255)",strokeWidth:Object(B.a)(o,{name:e.name,index:c})?2:1,width:10,height:10,onDragMove:function(e){return n.onDragAnchor(e,c)},onDragStart:function(){return r(e.name,c)},onClick:function(){return r(e.name,c)},draggable:!0})})},n.renderAnchorBorder=function(e){var t=Object(q.a)(e.anchors),r=Object(U.a)(["current","name"],e.name,n.props)&&t,o=Object(K.a)(e.anchors.map(function(e){return[e.x,e.y]}));return r&&a.a.createElement(I.Line,{stroke:"rgb(0, 161, 255)",strokeWidth:1,key:"anchor-border-".concat(e.name),points:e.close?[].concat(Object(g.a)(o),[t.x,t.y]):o})},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){J.a.load({google:{families:ae.map(function(e){return e.value})},classes:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,r=t.height,o=t.current,c=t.elements,i=t.settings,l=this.getElementsWithAnchors();return a.a.createElement(I.Stage,{width:n,height:r,onMouseDown:this.handleStageMouseDown},a.a.createElement(I.Layer,null,a.a.createElement(I.Rect,{width:n,height:r,fill:i.fill})),i.background&&a.a.createElement(I.Layer,null,a.a.createElement(oe,{settings:i,width:n,height:r})),a.a.createElement(I.Layer,{ref:function(t){return e.layer=t}},c.map(this.renderElement),a.a.createElement(Z,{current:o})),a.a.createElement(I.Layer,null,l.map(this.renderAnchorBorder),l.map(this.renderAnchors)))}}]),t}(r.Component);function Oe(){var e=Object(f.a)(["\n    font-size: 9px;\n    color: gray;\n    padding-top: 2px;\n"]);return Oe=function(){return e},e}function je(){var e=Object(f.a)(["\n    padding: 3px 20px;\n    border: 1px solid gray;\n    color: darkslategray;\n    background: rgb(241, 241, 241);\n    border-radius: 3px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n    outline: none;\n"]);return je=function(){return e},e}function ye(){var e=Object(f.a)(["\n    width: 300px;\n    background: rgb(241, 241, 241);\n    padding: 15px;\n    margin-bottom: 10px;\n    & > .panel-row:not(:last-of-type) {\n        margin-bottom: 10px;\n    }\n"]);return ye=function(){return e},e}var Ce=d.a.div(ye()),Ee=d.a.button(je()),ke=d.a.div(Oe());function xe(){var e=Object(f.a)(["\n    color: gray;\n    font-size: 11px;\n"]);return xe=function(){return e},e}function we(){var e=Object(f.a)(["\n    width: 50%;\n"]);return we=function(){return e},e}function Ae(){var e=Object(f.a)(["\n    display: flex;\n"]);return Ae=function(){return e},e}var Se=d.a.div(Ae()),Te=d.a.div(we()),Pe=d.a.span(xe()),De=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.children;return a.a.createElement(Se,{className:"panel-row"},a.a.createElement(Te,null,a.a.createElement(Pe,null,t)),a.a.createElement(Te,null,n))}}]),t}(r.Component),Me=n(137),We=n.n(Me),ze=n(138),Ne=Object(r.createContext)({});function Re(){var e=Object(f.a)(["\n    position: absolute;\n    right: 0;\n    top: 20px;\n    z-index: 10;\n"]);return Re=function(){return e},e}function Fe(){var e=Object(f.a)(["\n    width: 18px;\n    height: 18px;\n    border: 2px solid #fff;\n    background-color: ",";\n    border-radius: 50%;\n    cursor: pointer;\n"]);return Fe=function(){return e},e}function Le(){var e=Object(f.a)(["\n    position: relative;\n"]);return Le=function(){return e},e}function He(){var e=Object(f.a)(["\n    display: flex;\n"]);return He=function(){return e},e}var Ie=d.a.div(He()),Xe=d.a.div(Le()),Ye=d.a.div(Fe(),function(e){return e.color||"#fff"}),Ue=d.a.div(Re()),Be=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={opened:!1},n.toggle=function(){return n.setState(function(e){return{opened:!e.opened}})},n.close=function(){return n.setState({opened:!1})},n.onChange=function(e,t){var r=e.rgb;t(n.props.prop,"rgba(".concat(r.r,", ").concat(r.g,", ").concat(r.b,", ").concat(r.a,")"))},n.renderPicker=function(e){var t=e.current,r=e.onChangeProp,o=e.onChangeSettingsProp,c=e.settings,i=n.props.prop,l=n.state.opened,u=t||c;return a.a.createElement(Ie,null,a.a.createElement(Xe,null,a.a.createElement(Ye,{color:u[i],onClick:n.toggle}),l&&a.a.createElement(Ue,null,a.a.createElement(We.a,{onClickOutside:n.close},a.a.createElement(ze.SketchPicker,{color:u[i],onChange:function(e){return n.onChange(e,t?r:o)}})))))},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement(Ne.Consumer,null,this.renderPicker)}}]),t}(r.Component);function qe(){var e=Object(f.a)(["\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    opacity: 0;\n    cursor:pointer;\n    ::-webkit-file-upload-button {\n        cursor:pointer;\n    }\n"]);return qe=function(){return e},e}Be.defaultProps={prop:"fill"};var Ke=d.a.input(qe()),Ve=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).reader=new FileReader,n.onLoad=function(e,t){var r=n.props.prop,a=Object(q.a)(e.target.files);a&&(n.reader.readAsDataURL(a),n.reader.onload=function(){return t(r,n.reader.result)})},n.renderLoader=function(e){var t=e.current,r=e.settings,o=e.onChangeProp,c=e.onChangeSettingsProp,i=n.props,l=i.prop,u=i.removable,s=t?o:c;return(t||r)[l]&&u?a.a.createElement(Ee,{onClick:function(){return s(l,null)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"):a.a.createElement(Ee,null,"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c",a.a.createElement(Ke,{type:"file",accept:"image/*",onChange:function(e){return n.onLoad(e,s)}}))},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement(Ne.Consumer,null,this.renderLoader)}}]),t}(r.Component),Je=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).renderCheckbox=function(e){var t=e.current,r=e.settings,o=e.onChangeProp,c=e.onChangeSettingsProp,i=n.props.prop,l=!!(t||r)[i],u=t?o:c;return a.a.createElement("input",{type:"checkbox",checked:l,onChange:function(e){return u(i,e.target.checked)}})},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement(Ne.Consumer,null,this.renderCheckbox)}}]),t}(r.Component),Ge=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).renderRange=function(e){var t=e.current,r=e.settings,o=e.onChangeProp,c=e.onChangeSettingsProp,i=n.props.prop,l=(t||r)[i],u=t?o:c;return a.a.createElement("input",{type:"range",min:.01,max:1,step:.01,value:String(l||1),onChange:function(e){return u(i,Number(e.target.value))}})},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement(Ne.Consumer,null,this.renderRange)}}]),t}(r.Component),Qe=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement(Ce,null,a.a.createElement(De,{label:"\u0424\u043e\u043d"},a.a.createElement(Ve,{prop:"background",removable:!0})),a.a.createElement(De,{label:"\u0426\u0432\u0435\u0442 \u0444\u043e\u043d\u0430"},a.a.createElement(Be,null)),a.a.createElement(Ne.Consumer,null,function(e){var t=e.settings;return t.background&&a.a.createElement(r.Fragment,null,a.a.createElement(De,{label:"\u041f\u0430\u0442\u0442\u0435\u0440\u043d"},a.a.createElement(Je,{prop:"pattern"})),t.pattern&&a.a.createElement(De,{label:"\u041c\u0430\u0441\u0448\u0442\u0430\u0431"},a.a.createElement(Ge,{prop:"patternScale"})))}))}}]),t}(r.Component),Ze=n(162);function $e(){var e=Object(f.a)(["\n    width: ",";\n    background: rgb(225, 225, 225);\n    border-width: 0px;\n    padding: 3px 5px;\n    color: darkslategray;\n    border-radius: 3px;\n    outline: none;\n"]);return $e=function(){return e},e}var _e=d.a.input($e(),function(e){return e.width||"50px"}),et=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).onChange=function(e,t,r){var a=n.props,o=a.prop,c=a.isNumber,i=a.format,l=a.onChange,u=e.target.value,s=u?c?Number(u.replace(/[^.0-9]/gim,"")):u:null,h=i?i(s,r):s;t(o,h),l&&l(h)},n.getValue=function(e){var t=n.props,r=t.prop,a=t.parse,o=Object(Ze.a)(e[r])?"":e[r];return a?a(o,e):o},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.small,r=t.width;return a.a.createElement(Ne.Consumer,null,function(t){var o=t.current,c=t.onChangeProp;return a.a.createElement("div",null,a.a.createElement(_e,{type:"text",width:r,value:e.getValue(o),onChange:function(t){return e.onChange(t,c,o)}}),n&&a.a.createElement(ke,null,n))})}}]),t}(r.Component);function tt(){var e=Object(f.a)(["\n    display: flex;\n    & > div:first-of-type {\n        margin-right: 10px;\n    }\n"]);return tt=function(){return e},e}var nt=d.a.div(tt()),rt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).disabledProp=function(e){var t=n.props.type,r=Q[t];return r&&Object(Y.a)(e,r)&&!r[e]},n.parseWidth=function(e,t){var n=t.scaleX,r=void 0===n?1:n;return Math.abs(Math.round((isNaN(e)?0:e)*r))},n.formatWidth=function(e,t){var n=t.scaleX,r=void 0===n?1:n;return Math.abs(Math.round((isNaN(e)?0:e)/r))},n.parseHeight=function(e,t){var n=t.scaleY,r=void 0===n?1:n;return Math.abs(Math.round((isNaN(e)?0:e)*r))},n.formatHeight=function(e,t){var n=t.scaleY,r=void 0===n?1:n;return Math.abs(Math.round((isNaN(e)?0:e)/r))},n.onChangeX=function(e,t,n){if(t.anchors){var r=e-Object(q.a)(t.anchors).x,a=t.anchors.map(function(e){return Object(m.a)({},e,{x:e.x+r})});n(Object(m.a)({},t,{x:e,anchors:a}))}},n.onChangeY=function(e,t,n){if(t.anchors){var r=e-Object(q.a)(t.anchors).y,a=t.anchors.map(function(e){return Object(m.a)({},e,{y:e.y+r})});n(Object(m.a)({},t,{y:e,anchors:a}))}},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement(Ce,null,!this.disabledProp("resizeEnabled")&&a.a.createElement(De,{label:"\u0420\u0430\u0437\u043c\u0435\u0440"},a.a.createElement(nt,null,a.a.createElement(et,{prop:"width",small:"\u0448\u0438\u0440\u0438\u043d\u0430",parse:this.parseWidth,format:this.formatWidth,isNumber:!0}),a.a.createElement(et,{prop:"height",small:"\u0432\u044b\u0441\u043e\u0442\u0430",parse:this.parseHeight,format:this.formatHeight,isNumber:!0}))),a.a.createElement(De,{label:"\u041f\u043e\u0437\u0438\u0446\u0438\u044f"},a.a.createElement(Ne.Consumer,null,function(t){var n=t.current,r=t.onChange;return a.a.createElement(nt,null,a.a.createElement(et,{prop:"x",small:"\u0441\u043b\u0435\u0432\u0430",isNumber:!0,onChange:function(t){return e.onChangeX(t,n,r)}}),a.a.createElement(et,{prop:"y",small:"\u0441\u0432\u0435\u0440\u0445\u0443",isNumber:!0,onChange:function(t){return e.onChangeY(t,n,r)}}))})),!this.disabledProp("rotateEnabled")&&a.a.createElement(De,{label:"\u041f\u043e\u0432\u043e\u0440\u043e\u0442"},a.a.createElement(et,{prop:"rotation",small:"\u0443\u0433\u043e\u043b",isNumber:!0})))}}]),t}(r.Component),at=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement(Ne.Consumer,null,function(e){var t=e.onRemove;return a.a.createElement(Ce,null,a.a.createElement(Ee,{onClick:t},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"))})}}]),t}(r.Component);function ot(){var e=Object(f.a)(["\n    display: flex;\n    & > div:first-of-type {\n        margin-right: 10px;\n    }\n"]);return ot=function(){return e},e}var ct=d.a.div(ot()),it=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.type;return a.a.createElement(Ce,null,a.a.createElement(De,{label:"\u0417\u0430\u043b\u0438\u0432\u043a\u0430"},a.a.createElement(Be,null)),"qr"!==e&&a.a.createElement(De,{label:"\u041e\u0431\u0432\u043e\u0434\u043a\u0430"},a.a.createElement(ct,null,a.a.createElement(Be,{prop:"stroke"}),a.a.createElement(et,{prop:"strokeWidth",isNumber:!0,small:"\u0442\u043e\u043b\u0449\u0438\u043d\u0430"}))))}}]),t}(r.Component),lt=Object(r.createContext)({});function ut(){var e=Object(f.a)(["\n    color: rgb(81, 81, 81);\n    font-size: 11px;\n    transition: all .3s;\n    cursor: pointer;\n    margin-bottom: 3px;\n    display: flex;\n    align-items: center;\n    &:hover {\n        color: #000;\n    }\n    svg {\n        margin-right: 5px;\n    }\n"]);return ut=function(){return e},e}var st=d.a.div(ut()),ht=function(){return a.a.createElement("svg",{width:15,height:15},a.a.createElement("g",null,a.a.createElement("rect",{x:5,y:5,width:9,height:9,fill:"white",strokeWidth:1,stroke:"black"}),a.a.createElement("rect",{x:3,y:3,width:9,height:9,fill:"white",strokeWidth:1,stroke:"black"}),a.a.createElement("rect",{x:1,y:1,width:9,height:9,fill:"#ababab",stroke:"black",strokeWidth:1})))},pt=function(){return a.a.createElement("svg",{width:15,height:15},a.a.createElement("g",null,a.a.createElement("rect",{x:5,y:5,width:9,height:9,fill:"#ababab",strokeWidth:1,stroke:"black"}),a.a.createElement("rect",{x:3,y:3,width:9,height:9,fill:"white",strokeWidth:1,stroke:"black"}),a.a.createElement("rect",{x:1,y:1,width:9,height:9,fill:"white",stroke:"black",strokeWidth:1})))},bt=function(){return a.a.createElement("svg",{width:15,height:15},a.a.createElement("g",null,a.a.createElement("rect",{x:5,y:5,width:9,height:9,fill:"white",strokeWidth:1,stroke:"black"}),a.a.createElement("rect",{x:1,y:1,width:9,height:9,fill:"#ababab",stroke:"black",strokeWidth:1})))},gt=function(){return a.a.createElement("svg",{width:15,height:15},a.a.createElement("g",null,a.a.createElement("rect",{x:5,y:5,width:9,height:9,fill:"#ababab",strokeWidth:1,stroke:"black"}),a.a.createElement("rect",{x:1,y:1,width:9,height:9,fill:"white",stroke:"black",strokeWidth:1})))},mt=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement(Ce,null,a.a.createElement(lt.Consumer,null,function(e){var t=e.onChangeOrder;return a.a.createElement(De,{label:"\u041f\u043e\u0440\u044f\u0434\u043e\u043a"},a.a.createElement(st,{onClick:function(){return t()}},a.a.createElement(ht,null)," \u041d\u0430 \u043f\u0435\u0440\u0435\u0434\u043d\u0438\u0439 \u043f\u043b\u0430\u043d"),a.a.createElement(st,{onClick:function(){return t(!0)}},a.a.createElement(pt,null)," \u041d\u0430 \u0437\u0430\u0434\u043d\u0438\u0439 \u043f\u043b\u0430\u043d"),a.a.createElement(st,{onClick:function(){return t(!1,!0)}},a.a.createElement(bt,null)," \u041f\u0435\u0440\u0435\u043b\u043e\u0436\u0438\u0442\u044c \u0432\u043f\u0435\u0440\u0435\u0434"),a.a.createElement(st,{onClick:function(){return t(!0,!0)}},a.a.createElement(gt,null)," \u041f\u0435\u0440\u0435\u043b\u043e\u0436\u0438\u0442\u044c \u043d\u0430\u0437\u0430\u0434"))}))}}]),t}(r.Component),ft=n(340),dt=n(335);function vt(){var e=Object(f.a)(["\n    -webkit-appearance: none;\n    border-width: 0px 3px 0px 0px;\n    padding: 3px 3px 3px 5px;\n    outline: none;\n    border-radius: 0px;\n    border-right-style: solid;\n    border-right-color: rgb(183, 183, 183);\n    color: darkslategray;\n    width: 100%;\n"]);return vt=function(){return e},e}var Ot=d.a.select(vt()),jt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).onChange=function(e,t){t(n.props.prop,e.target.value)},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.options,r=t.prop,o=t.small;return a.a.createElement(Ne.Consumer,null,function(t){var c=t.current,i=t.onChangeProp;return a.a.createElement("div",null,a.a.createElement(Ot,{value:c[r],onChange:function(t){return e.onChange(t,i)}},n.map(function(e){return a.a.createElement("option",{key:e.value,value:e.value},e.label)})),o&&a.a.createElement(ke,null,o))})}}]),t}(r.Component);jt.defaultProps={options:[]};var yt=n(139);function Ct(){var e=Object(f.a)(["\n    background: rgb(225, 225, 225);\n    border-width: 0px;\n    padding: 3px 5px;\n    color: darkslategray;\n    border-radius: 3px;\n    outline: none;\n    width: 100%;\n    resize: none;\n"]);return Ct=function(){return e},e}var Et=Object(d.a)(yt.a)(Ct()),kt=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.prop;return a.a.createElement(Ne.Consumer,null,function(t){var n=t.current,r=t.onChangeProp;return a.a.createElement(Et,{value:n[e],onChange:function(t){return r(e,t.target.value)}})})}}]),t}(r.Component);function xt(){var e=Object(f.a)(["\n    font-size: 12px;\n    cursor: pointer;\n    transition: all .3s;\n    &:hover {\n        color: black;\n    }\n    &:not(:last-of-type) {\n        margin-right: 7px;\n    }\n"]);return xt=function(){return e},e}function wt(){var e=Object(f.a)(["\n    display: flex;\n    justify-content: space-between;\n"]);return wt=function(){return e},e}function At(){var e=Object(f.a)(["\n    margin-bottom: 10px;\n"]);return At=function(){return e},e}var St,Tt=d.a.div(At()),Pt=Object(d.a)(Tt)(wt()),Dt=Object(d.a)(P.a)(xt()),Mt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).onChangeAlign=function(e){(0,n.props.onChangeProp)("align",e)},n.onChangeFontStyle=function(e){var t=n.props,r=t.current,a=t.onChangeProp,o=(r.fontStyle||"").split(" "),c=Object(O.a)(e,o)?Object(ft.a)([e],o):Object(dt.a)(e,o);a("fontStyle",(c=c.length?Object(O.a)("normal",c)&&c.length>1?Object(ft.a)(["normal"],c):c:["normal"]).join(" "))},n.onChangeTextDecoration=function(e){var t=n.props,r=t.current,a=t.onChangeProp,o=(r.textDecoration||"").split(" ");a("textDecoration",(Object(O.a)(e,o)?Object(ft.a)([e],o):Object(dt.a)(e,o)).join(" "))},n.isAlignActive=function(e){return Object(B.a)(e,n.props.current.align)},n.isFontStyleActive=function(e){return Object(O.a)(e,n.props.current.fontStyle||"")},n.isTextDecorationActive=function(e){return Object(O.a)(e,n.props.current.textDecoration||"")},n.stylesList=[{icon:D.b,value:"left",onChange:n.onChangeAlign,isActive:n.isAlignActive},{icon:D.a,value:"center",onChange:n.onChangeAlign,isActive:n.isAlignActive},{icon:D.c,value:"right",onChange:n.onChangeAlign,isActive:n.isAlignActive},{icon:D.e,value:"bold",onChange:n.onChangeFontStyle,isActive:n.isFontStyleActive},{icon:D.j,value:"italic",onChange:n.onChangeFontStyle,isActive:n.isFontStyleActive},{icon:D.o,value:"underline",onChange:n.onChangeTextDecoration,isActive:n.isTextDecorationActive},{icon:D.n,value:"line-through",onChange:n.onChangeTextDecoration,isActive:n.isTextDecorationActive}],n.renderTextStylePanel=function(){return a.a.createElement("div",null,n.stylesList.map(function(e){var t=e.icon,n=e.value,r=e.onChange,o=e.isActive;return a.a.createElement(Dt,{key:n,color:o(n)?"black":"rgb(181, 181, 181)",icon:t,onClick:function(){return r(n)}})}))},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement(Ce,null,a.a.createElement(Pt,null,a.a.createElement(et,{prop:"fontSize",small:"\u0440\u0430\u0437\u043c\u0435\u0440 \u0448\u0440\u0438\u0444\u0442\u0430",isNumber:!0}),this.renderTextStylePanel()),a.a.createElement(Tt,null,a.a.createElement(jt,{small:"\u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0448\u0440\u0438\u0444\u0442",prop:"fontFamily",options:ae})),a.a.createElement(kt,{prop:"text"}))}}]),t}(r.Component),Wt=(St=Mt,function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement(Ne.Consumer,null,function(t){return a.a.createElement(St,Object.assign({},t,e.props))})}}]),t}(r.Component)),zt=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement(Ce,null,a.a.createElement(De,{label:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"},a.a.createElement(Ve,{prop:"image"})))}}]),t}(r.Component),Nt=[{value:"source-over",label:"\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u044b\u0439"},{value:"multiply",label:"\u0423\u043c\u043d\u043e\u0436\u0435\u043d\u0438\u0435"},{value:"screen",label:"\u041e\u0441\u0432\u0435\u0442\u043b\u0435\u043d\u0438\u0435"},{value:"overlay",label:"\u041f\u0435\u0440\u0435\u043a\u0440\u044b\u0442\u0438\u0435"},{value:"darken",label:"\u0417\u0430\u043c\u0435\u043d\u0430 \u0442\u0435\u043c\u043d\u044b\u043c"},{value:"lighten",label:"\u0417\u0430\u043c\u0435\u043d\u0430 \u0441\u0432\u0435\u0442\u043b\u044b\u043c"},{value:"color-dodge",label:"\u041e\u0441\u0432\u0435\u0442\u043b\u0435\u043d\u0438\u0435 \u043e\u0441\u043d\u043e\u0432\u044b"},{value:"color-burn",label:"\u0417\u0430\u0442\u0435\u043c\u043d\u0435\u043d\u0438\u0435 \u043e\u0441\u043d\u043e\u0432\u044b"},{value:"hard-light",label:"\u0416\u0435\u0441\u0442\u043a\u0438\u0439 \u0441\u0432\u0435\u0442"},{value:"soft-light",label:"\u041c\u044f\u0433\u043a\u0438\u0439 \u0441\u0432\u0435\u0442"},{value:"difference",label:"\u0420\u0430\u0437\u043d\u0438\u0446\u0430"},{value:"exclusion",label:"\u0418\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435"},{value:"hue",label:"\u0426\u0432\u0435\u0442\u043e\u0432\u043e\u0439 \u0442\u043e\u043d"},{value:"saturation",label:"\u041d\u0430\u0441\u044b\u0449\u0435\u043d\u043d\u043e\u0441\u0442\u044c"},{value:"color",label:"\u0426\u0432\u0435\u0442\u043d\u043e\u0441\u0442\u044c"},{value:"luminosity",label:"\u0421\u0432\u0435\u0447\u0435\u043d\u0438\u0435"}],Rt=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement(Ce,null,a.a.createElement(De,{label:"\u041d\u0430\u043b\u043e\u0436\u0435\u043d\u0438\u0435"},a.a.createElement(jt,{prop:"globalCompositeOperation",options:Nt})))}}]),t}(r.Component),Ft=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement(Ce,null,a.a.createElement(De,{label:"\u0421\u0441\u044b\u043b\u043a\u0430"},a.a.createElement(et,{prop:"link",width:"100%"})))}}]),t}(r.Component),Lt=Object(r.createContext)({}),Ht=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement(Ce,null,a.a.createElement(De,{label:"\u041e\u043f\u043e\u0440\u043d\u044b\u0435 \u0442\u043e\u0447\u043a\u0438"},a.a.createElement(Lt.Consumer,null,function(e){var t=e.editable,n=e.onChangeEditable;return a.a.createElement(Ee,{onClick:function(){return n(!t)}},t?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")})),a.a.createElement(De,{label:"\u0417\u0430\u043c\u043a\u043d\u0443\u0442\u044c \u043a\u043e\u043d\u0442\u0443\u0440"},a.a.createElement(Je,{prop:"close"})))}}]),t}(r.Component),It=n(345);function Xt(){var e=Object(f.a)(["\n    margin-right: 10px;\n    margin-bottom: 15px;\n    cursor: pointer;\n    transition: all .3s;\n    &:hover {\n        color: black;\n    }\n"]);return Xt=function(){return e},e}var Yt=Object(d.a)(P.a)(Xt()),Ut={text:[rt,Wt,it,Rt,mt,at],rect:[rt,it,Rt,mt,at],circle:[rt,it,Rt,mt,at],curve:[rt,it,Ht,function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).onChangeAnchorType=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e("anchors",Object(It.a)([n,"bezier"],r,t))},n.disableBezier=function(e,t){return 0===t||t===e.length-1||Object(A.a)([t-1,"bezier"],e)&&Object(A.a)([t+1,"bezier"],e)||Object(A.a)([t-1,"bezier"],e)&&Object(A.a)([t-2,"bezier"],e)||Object(A.a)([t+1,"bezier"],e)&&Object(A.a)([t+2,"bezier"],e)},n.renderPanel=function(e,t,r,o){var c=r.anchors[e.index],i=n.disableBezier(r.anchors,e.index);return a.a.createElement(Ce,null,a.a.createElement(De,{label:"\u0422\u0438\u043f"},!i&&a.a.createElement(Yt,{icon:D.d,color:c.bezier?"black":"rgb(181, 181, 181)",onClick:function(){return n.onChangeAnchorType(o,r.anchors,e.index,!0)}}),a.a.createElement(Yt,{icon:D.p,color:c.bezier?"rgb(181, 181, 181)":"black",onClick:function(){return n.onChangeAnchorType(o,r.anchors,e.index)}})),a.a.createElement(Ee,{onClick:t},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043e\u043f\u043e\u0440\u043d\u0443\u044e \u0442\u043e\u0447\u043a\u0443"))},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement(Lt.Consumer,null,function(t){var n=t.currentAnchor,r=t.onRemoveCurrentAnchor;return a.a.createElement(Ne.Consumer,null,function(t){var a=t.current,o=t.onChangeProp;return n&&e.renderPanel(n,r,a,o)})})}}]),t}(r.Component),Rt,mt,at],image:[rt,zt,Rt,mt,at],qr:[rt,it,Ft,mt,at]},Bt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).getPanels=function(){var e=n.props.type;return Ut[e]||[Qe]},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.type;return a.a.createElement("div",null,this.getPanels().map(function(t,n){return a.a.createElement(t,{key:"panel-".concat(n),type:e})}))}}]),t}(r.Component);function qt(){var e=Object(f.a)(["\n    margin-right: 15px;\n    border: 1px solid #eee;\n    width: ","px;\n    height: ","px;\n    overflow: hidden;\n"]);return qt=function(){return e},e}function Kt(){var e=Object(f.a)(["\n    * {\n        box-sizing: border-box;\n    }\n    font-family: 'Lucida Grande', sans-serif;\n    display: flex;\n"]);return Kt=function(){return e},e}var Vt=d.a.div(Kt()),Jt=d.a.div(qt(),Object(v.a)("width"),Object(v.a)("height")),Gt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).state={selectedType:null,current:null,anchorsEditable:!1,currentAnchor:null},n.onKeyDown=function(e){var t=n.state,r=t.current,a=t.currentAnchor;if(!Object(O.a)(e.target.tagName,["TEXTAREA","INPUT"]))switch(e.keyCode){case 8:a?n.onRemoveCurrentAnchor():r&&n.onRemoveCurrent();break;case 37:n.moveCurrentToX(e,!0);break;case 38:n.moveCurrentToY(e,!0);break;case 39:n.moveCurrentToX(e);break;case 40:n.moveCurrentToY(e)}},n.moveCurrentToX=function(e,t){e.preventDefault();var r=n.getCurrentElement(),a=r.x+(t?-1:1);n.onChangeCurrentElement(Object(m.a)({},r,{x:a},r.anchors?{anchors:r.anchors.map(function(e){return Object(j.a)("x",e.x+(t?-1:1),e)})}:{}))},n.moveCurrentToY=function(e,t){e.preventDefault();var r=n.getCurrentElement(),a=r.y+(t?-1:1);n.onChangeCurrentElement(Object(m.a)({},r,{y:a},r.anchors?{anchors:r.anchors.map(function(e){return Object(j.a)("y",e.y+(t?-1:1),e)})}:{}))},n.onSelectType=function(e){return n.setState({selectedType:e,current:null,anchorsEditable:!1,currentAnchor:null})},n.onChangeCurrent=function(e){return n.setState(function(t){var n=e&&t.current===e;return{current:e,anchorsEditable:!!n&&t.anchorsEditable,currentAnchor:n?t.currentAnchor:null}})},n.onChangeAnchorsEditable=function(e){return n.setState({anchorsEditable:e})},n.getElements=function(){return Object(y.a)([],["data","elements"],n.props)},n.getSettings=function(){return Object(y.a)({},["data","settings"],n.props)},n.getCurrentElement=function(){var e=n.state.current;return Object(C.a)(Object(E.a)("name",e),n.getElements())},n.onChangeElements=function(e){var t=n.props,r=t.onChange,a=t.data;r(Object(m.a)({},a,{elements:e}))},n.onChangeSettings=function(e){var t=n.props,r=t.onChange,a=t.data;r(Object(m.a)({},a,{settings:e}))},n.onAddElement=function(e,t){var r=n.state.selectedType,a=T()(),o=G[r];n.onChangeElements([].concat(Object(g.a)(n.getElements()),[Object(m.a)({},o,{name:a,x:e,y:t},o.anchors?{anchors:[{x:e,y:t,bezier:!1}]}:{})])),n.setState({selectedType:null,current:a,anchorsEditable:!!o.anchors,currentAnchor:o.anchors?{name:a,index:0}:null})},n.onChangeCurrentElement=function(e){var t=n.getElements();n.onChangeElements(Object(k.a)(Object(x.a)(Object(E.a)("name",e.name),t),e,t))},n.onChangeCurrentProp=function(e,t){var r=Object(m.a)({},n.getCurrentElement(),Object(b.a)({},e,t));n.onChangeCurrentElement(r)},n.onChangeSettingsProp=function(e,t){var r=Object(m.a)({},n.getSettings(),Object(b.a)({},e,t));n.onChangeSettings(r)},n.onRemoveCurrent=function(){var e=n.state.current,t=n.getElements();n.onChangeElements(Object(w.a)(Object(x.a)(Object(E.a)("name",e),t),1,t)),n.setState({current:null,anchorsEditable:!1,currentAnchor:null})},n.onChangeOrder=function(e,t){var r=n.state.current,a=n.getElements(),o=Object(x.a)(Object(E.a)("name",r),a),c=t?e?o-1<0?0:o-1:o+1>a.length?a.length:o+1:e?0:a.length,i=Array.from(a),l=i.splice(o,1),u=Object(p.a)(l,1)[0];i.splice(c,0,u),n.onChangeElements(i)},n.onAddAnchor=function(e,t){var r=n.getCurrentElement(),a=[].concat(Object(g.a)(r.anchors),[{x:e,y:t,bezier:!1}]);n.onChangeCurrentProp("anchors",a),n.setState({currentAnchor:{name:r.name,index:a.length-1}})},n.onChangeCurrentAnchor=function(e,t){return n.setState({currentAnchor:{name:e,index:t}})},n.onRemoveCurrentAnchor=function(){var e=n.state.currentAnchor,t=n.getCurrentElement();n.setState({currentAnchor:null}),n.onChangeCurrentProp("anchors",Object(w.a)(e.index,1,t.anchors))},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.onKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.onKeyDown)}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.height,r=this.state,o=r.selectedType,c=r.anchorsEditable,i=r.currentAnchor,l=this.getElements(),u=this.getCurrentElement();return a.a.createElement(Ne.Provider,{value:{current:u,onChangeProp:this.onChangeCurrentProp,onChange:this.onChangeCurrentElement,onRemove:this.onRemoveCurrent,settings:this.getSettings(),onChangeSettingsProp:this.onChangeSettingsProp,onChangeSettings:this.onChangeSettings}},a.a.createElement(lt.Provider,{value:{onChangeOrder:this.onChangeOrder}},a.a.createElement(Vt,null,a.a.createElement(H,{selected:o,onSelect:this.onSelectType}),a.a.createElement(Jt,{width:t,height:n},a.a.createElement(ve,{elements:l,current:u,onChangeCurrentElement:this.onChangeCurrentElement,onChangeCurrentProp:this.onChangeCurrentProp,selectedType:o,onChangeCurrent:this.onChangeCurrent,onAddElement:this.onAddElement,onAddAnchor:this.onAddAnchor,onChangeCurrentAnchor:this.onChangeCurrentAnchor,currentAnchor:i,width:t,height:n,settings:this.getSettings(),anchorsEditable:c})),a.a.createElement(Lt.Provider,{value:{editable:c,onChangeEditable:this.onChangeAnchorsEditable,onRemoveCurrentAnchor:this.onRemoveCurrentAnchor,currentAnchor:i}},a.a.createElement(Bt,{type:Object(A.a)(["type"],u)})))))}}]),t}(r.Component);Gt.defaultProps={data:{},width:400,height:500};var Qt=Gt,Zt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).state={data:{}},n.onChange=function(e){return n.setState({data:e})},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement(Qt,{data:this.state.data,onChange:this.onChange})}}]),t}(r.Component);c.a.render(a.a.createElement(Zt,null),document.getElementById("root"))},167:function(e,t,n){e.exports=n(164)}},[[167,2,1]]]);
//# sourceMappingURL=main.2a9e95b7.chunk.js.map